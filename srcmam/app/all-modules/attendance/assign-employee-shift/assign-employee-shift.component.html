<div class="content container-fluid">

    <!-- Page Header -->
    <div class="row">
        <div class="col-md-12">
            <div class="page-head-box">
                <h3>Employee Shift Assign </h3>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a routerLink="/layout/dashboard/admin">Dashboard</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Attendance & Leave</li>
                        <li class="breadcrumb-item active" aria-current="page">Shift Planning</li>
                        <li class="breadcrumb-item active" aria-current="page">Shift Scheduling </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>

    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <h1 class="card-title mb-0">Employee Shift Assign Form</h1>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-12">
                        <form class="needs-validation" novalidate [formGroup]="shiftAssignForm">
                            <div class="form-row row">
                                <div class="col-md-4 mb-3">
                                    <label>Type <small>*</small></label>
                                    <select class="form-control" formControlName="type" [(ngModel)]="selectedType">
                                        <option value="">--Select--</option>
                                        <option value="Single">Single</option>
                                        <option value="Rotate">Rotate</option>
                                     </select>
                                    <small *ngIf="shiftAssignForm.get('type').invalid && shiftAssignForm.get('type').touched" class="text-danger"> *This field is Required</small>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label>On</label>
                                    <select class="form-control" formControlName="on" [(ngModel)]="selectedOnType">
                                        <option value="">--Select--</option>
                                        <option>General</option>
                                        <option>one Day</option>
                                        <option>Periodic</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->
                                </div>
                                <div class="col-md-4 mb-3">

                                    <div class="form-group form-focus mb-0">
                                        <label>EffectiveDate <small>*</small></label>
                                        <div class="form-group form-focus mb-0">
                                            <div class="cal-icon">
                                                <input class="form-control floating datetimepicker" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY',  returnFocusToInput: true }" formControlName="effectiveDate">
                                            </div>
                                            <small *ngIf="shiftAssignForm.get('effectiveDate').invalid && shiftAssignForm.get('effectiveDate').touched">This Field is required</small>
                                        </div>

                                    </div>
                                </div>


                                <div class="col-md-4 mb-3">
                                    <label>Default Shift <small>*</small></label>
                                    <select class="form-control" formControlName="defaultShift">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let item of services" [value]="item.shiftName">{{item.shiftName}}</option>
                                     </select>
                                    <small *ngIf="shiftAssignForm.get('defaultShift').invalid && shiftAssignForm.get('defaultShift').touched" class="text-danger"> *Employee is Required</small>

                                </div>
                                <div class="col-md-4 mb-3">

                                    <div class="form-group form-focus mb-0" *ngIf="selectedOnType=='Periodic'">
                                        <label>Date</label>
                                        <div class="form-group form-focus mb-0">
                                            <div class="cal-icon">
                                                <input class="form-control floating datetimepicker" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY',  returnFocusToInput: true }" formControlName="date">
                                            </div>
                                            <!-- <small *ngIf="shiftAssignForm.get('fromDate').invalid && shiftAssignForm.get('fromDate').touched"></small> -->
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-4 mb-3" *ngIf='selectedType == "Rotate"'>
                                    <label>Default Shift Days</label>
                                    <select class="form-control" formControlName="defaultDays">
                                        <option value="">--Select--</option>
                                        <option >Weekly</option>
                                        <option >Half Month</option>
                                        <option >Month</option>
                                        <option >10 days</option>
                                        <option >20 days</option>
                                        <option >1 To 15 days</option>
                                        <option >16 To MonthEnd days</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->

                                </div>
                                <div class="col-md-4 mb-3" *ngIf='selectedType == "Rotate"'>
                                    <label>First Shift</label>
                                    <select class="form-control" formControlName="firstShift">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let item of services" [value]="item.shiftName">{{item.shiftName}}</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->

                                </div>
                                <div class="col-md-4 mb-3" *ngIf='selectedType == "Rotate"'>
                                    <label>First Shift Days</label>
                                    <select class="form-control" formControlName="firstShiftDays">
                                        <option value="">--Select--</option>
                                        <option >Weekly</option>
                                        <option >Half Month</option>
                                        <option >Month</option>
                                        <option >10 Days</option>
                                        <option >20 Days</option>
                                        <option >1 to 15</option>
                                        <option >16 to Monthend</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->

                                </div>
                                <div class="col-md-4 mb-3" *ngIf='selectedType == "Rotate"'>
                                    <label>Second Shift</label>
                                    <select class="form-control" formControlName="secondShift">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let item of services" [value]="item.shiftName">{{item.shiftName}}</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->

                                </div>
                                <div class="col-md-4 mb-3" *ngIf='selectedType == "Rotate"'>
                                    <label>Second Shift Days</label>
                                    <select class="form-control" formControlName="secondShiftDays">
                                        <option value="">--Select--</option>
                                        <option >Weekly</option>
                                        <option >Half Month</option>
                                        <option >Month</option>
                                        <option >10 Days</option>
                                        <option >20 Days</option>
                                        <option >1 to 15</option>
                                        <option >16 to Monthend</option>
                                     </select>
                                    <!-- <small
                                        *ngIf="shiftAssignForm.get('EmployeeID').invalid && shiftAssignForm.get('EmployeeID').touched"
                                        class="text-danger"> *Employee is Required</small> -->

                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Search Filter -->
        <div class="card">
            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <!-- <mat-form-field appearance="standard">
                    <mat-label>Filter</mat-label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Chris" #input>
                  </mat-form-field>
                  
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 100%;">

                          
                    <ng-container matColumnDef="select">
                      <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox (change)="$event ? masterToggle() : null"
                                      [checked]="selection.hasValue() && isAllSelected()"
                                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                                      [aria-label]="checkboxLabel()">
                        </mat-checkbox>
                      </th>
                      <td mat-cell *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()"
                                      (change)="$event ? selection.toggle(row) : null"
                                      [checked]="selection.isSelected(row)"
                                      [aria-label]="checkboxLabel(row)">
                        </mat-checkbox>
                      </td>
                    </ng-container>
                  
                 
                    <ng-container matColumnDef="id">
                      <th mat-header-cell *matHeaderCellDef> Employee Id </th>
                      <td mat-cell *matCellDef="let element"> {{element.employeeCode}} </td>
                    </ng-container>
                  
                   
                    <ng-container matColumnDef="name">
                      <th mat-header-cell *matHeaderCellDef> Name </th>
                      <td mat-cell *matCellDef="let element"> {{element.firstName}} {{element.lastName}} </td>
                    </ng-container>
                  
                    
                    <ng-container matColumnDef="branch">
                      <th mat-header-cell *matHeaderCellDef> Branch Name </th>
                      <td mat-cell *matCellDef="let element"> {{element.branch}} </td>
                    </ng-container>
                  
                  
                    <ng-container matColumnDef="department">
                      <th mat-header-cell *matHeaderCellDef> Department </th>
                      <td mat-cell *matCellDef="let element"> {{element.department}} </td>
                    </ng-container>
                    <ng-container matColumnDef="status">
                      <th mat-header-cell *matHeaderCellDef> Status </th>
                      <td mat-cell *matCellDef="let element"> {{(element.status==true)?'Active':'Inactive'}} </td>
                    </ng-container>
                  
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                        (click)="selection.toggle(row)"> 
                    </tr>
                  </table>  
                  <mat-paginator
                  [length]="tableLen"
                  [pageSizeOptions]="[5, 10, 20]"
                  showFirstLastButtons >
                  </mat-paginator> -->

                        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" id="datatable" class="datatable table table-stripped mb-0">

                            <thead>
                                <tr>
                                    <th>Id</th>
                                    <th>Name</th>
                                    <th>Branch</th>
                                    <th>Department</th>
                                    <th>Status</th>

                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th><input class="form-control" type="text" placeholder="Search Id" name="search-Id" /></th>
                                    <th><input class="form-control" type="text" placeholder="Search Name" name="search-name" /></th>
                                    <th><input class="form-control" type="text" placeholder="Search Branch" name="search-region" /></th>
                                    <th><input class="form-control" type="text" placeholder="Search Department" name="search-country" /></th>
                                    <th><input class="form-control" type="text" placeholder="Status" name="search-status"></th>
                                </tr>
                            </tfoot>
                            <tbody>
                                <tr *ngFor="let item of employee; let i = index" (click)="selectRow(i, item)">
                                    <td>{{item.employeeCode}}</td>
                                    <td>{{item.firstName}} {{item.lastName}}</td>
                                    <td>{{item.branch}}</td>
                                    <td>{{item.department}}</td>
                                    <td>{{item.status == 0?'Inactive':'Active'}}</td>
                                    <!-- <td class="text-end ico-sec justify-content-end">

                                <a (click)="editCity(city.id)"><i class="fas fa-pen"></i></a>
                                <a (click)="deleteCity(city.id)"><i class="far fa-trash-alt"></i></a>
                            </td> -->
                                </tr>

                            </tbody>

                        </table>


                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-offset-3 col-md-12" style="text-align: center;">
                    <button type="button" class="btn btn-primary" (click)="submit()">Submit</button>
                    <button type="button" class="btn btn-inverse" (click)="cancel()">Cancel</button>
                </div>
            </div>
        </div>
    </div>