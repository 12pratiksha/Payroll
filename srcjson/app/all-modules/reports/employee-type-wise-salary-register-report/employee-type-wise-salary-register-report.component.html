<div class="content container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="page-head-box">
                <h3>Employee Type Wise Salary Register Report</h3>

                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a routerLink="/layout/dashboard/admin">Dashboard</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Attendence & Leave</li>
                        <li class="breadcrumb-item active" aria-current="page">Attendence</li>
                        <li class="breadcrumb-item active" aria-current="page">Employee Type Wise Salary Register Report</li>
                    </ol>
                </nav>
            </div>
        </div>




        <div class="row">
            <div class="col-sm-12">
                <div class="card mb-0">
                    <h1 class="card-title mb-0">Employee Type Wise Salary Register Report</h1>
                    <div class="row">

                        <form [formGroup]="payrollForm">
                            <div class="form-row row">

                                <div class="col-md-4 mb-3">
                                    <label>Year <span  style="color: red;">*</span></label>
                                    <ng-select class="form-select form-control" formControlName="year">
                                        <ng-option *ngFor="let item of years" [value]="item">{{item}} </ng-option>
                                    </ng-select>
                                    <small *ngIf="form.get('year').invalid && form.get('year').touched"> Year is required *</small>
                                </div>
                                <div class="col-md-4 mb-3">

                                    <label>Month </label>
                                    <ng-select class="form-select form-control" formControlName="month">

                                        <ng-option *ngFor="let item of month" [value]="item">{{item}}</ng-option>
                                    </ng-select>

                                </div>

                                <div class="col-md-4 mb-3">
                                    <label>State</label>
                                    <select class="form-select form-control" formControlName="state">
                            <option value="">--Select--</option>
                           <option *ngFor="let item of stateData" [value]="item.stateId">{{item.stateName}}</option>
                        </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label>Branch</label>
                                    <select class="form-select form-control" formControlName="branch">
                                <option value="">--Select--</option>
                               <option *ngFor="let item of branch" [value]="item.id">{{item.branchName}}</option>
                            </select>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label>Category</label>
                                    <select class="form-select form-control" formControlName="category">
                                    <option value="">--Select--</option>
                                   <option *ngFor="let item of categories" [value]="item.categoryId">{{item.categoryName}}</option>
                                </select>
                                </div>

                                <div class="col-md-4 mb-3">

                                    <label>Department</label>
                                    <select class="form-select form-control" formControlName="department">
                                <option value="">--Select--</option>
                                <option *ngFor="let item of departments" [value]="item.departmentId">{{item.departmentName}}</option>
                            </select>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label>Sub-Department</label>
                                    <select class="form-select form-control" formControlName="subDepartment">
                                <option value="">--Select--</option>
                                <option *ngFor="let item of subDepartments" [value]="item.subDepartmentId">{{item.subDepartmentName}}</option>
                            </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label>Designation</label>
                                    <select class="form-select form-control" formControlName="designation">
                                <option value="">--Select--</option>
                                <option *ngFor="let item of designations" [value]="item.designationMasterId">{{item.name}}</option>
                            </select>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label>Grade</label>

                                    <select class="form-select form-control" formControlName="grade">
                                    <option value="">--Select--</option>
                                    <option *ngFor="let item of grade" [value]="item.lookupMasterId">{{item.name}}</option>
                                </select>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label>Search By</label>
                                    <ng-select class="form-select form-control" formControlName="searchBy">
                                        <ng-option *ngFor="let item of employeeslist" [value]="item.employeeId">[{{item.employeeCode}}]{{item.firstName}} {{item.lastName}}</ng-option>
                                    </ng-select>

                                </div>


                                <div class="col-md-4 mb-3">
                                    <label>Status</label>
                                    <select class="form-select form-control" formControlName="status">
                                <option value="">Active</option>
                                <option>InActive</option>
                                <option>Delete</option>
                                <option>Block</option>
                                <option>Hold</option>
                                <option>FNF</option>
                            </select>
                                </div>



                            </div>
                            <div class="col-sm-4 col-md-3" style="height: 80px;">
                                <a class="btn btn-success btn-search" (click)="test()" style="margin: auto;
                        margin-top: 11px;"><i class="fas fa-search me-2"></i> Search </a>
                            </div>


                        </form>
                        <!-- {{allowance | json}} -->
                        <div class="col-sm-12">
                            <div class="card mb-0">
                                <div class="col-sm-4 col-md-3">
                                    <button class="ml-2" (click)="exportToExcel()">Excel</button>
                                    <button (click)="downloadAsPDF('sectionToPrint')">Print</button>
                                </div>
                            </div>
                        </div>

                        <div class="row" id="sectionToPrint" #epltable>
                            <div class="col-sm-12">
                                <div class="card mb-0">

                                    <div class="card-body" style="width:100%;overflow-x: scroll;">
                                        <table class="table table-striped table-bordered table-sm row-border hover" id="datatable">

                                            <thead>
                                                <tr height="100px" style="font-size:15px; font-weight:600;">
                                                    <td style="width:100%" colspan="29">
                                                        <table style="width:100%;border-right: 1px solid white; text-align:center;border-left: 1px solid white;border-top: 1px solid white;border-bottom: 1px solid white;">
                                                            <tr>
                                                                <td style="width: 12% !important;border-right: 1px solid white;border-left: 1px solid white;border-top: 1px solid white;border-bottom: 1px solid white;">

                                                                    <div style="width: 205px;height:170px;background-repeat: no-repeat;background-size: cover;background-position: 0px 0px 0px 0px;" [ngStyle]="{backgroundImage: 'url(&quot;'+ imageName +'&quot;)'}">

                                                                    </div>
                                                                    <td style="width:70%;border-right: 1px solid white;border-left: 1px solid white;border-top: 1px solid white;border-bottom: 1px solid white;">
                                                                        <div style="text-align: center;font-size: 25px !important;">{{companyName}}</div>
                                                                        <div style="text-align: center; font-size: 15px !important;">{{address}}</div>
                                                                        <div style="text-align: center; font-size: 15px !important;">Employee Type Wise Salary Register Report</div>
                                                                        <div style="text-align: center; font-size: 15px !important;">{{month1}}-{{year}}</div>
                                                                    </td>
                                                            </tr>
                                                        </table>


                                                        </td>

                                                </tr>

                                                <tr>
                                                    <th>Sr.No.</th>
                                                    <th>Employee Code</th>
                                                    <th>EPF No.</th>
                                                    <th>UAN</th>
                                                    <th>Pan No.</th>
                                                    <th>EAccount No.</th>
                                                    <th>Employee Name</th>
                                                    <th>Department</th>
                                                    <th>Designation</th>
                                                    <th>Total Days</th>
                                                    <th>Paid Days</th>

                                                    <th *ngFor="let value of allelemnets">
                                                        <span *ngIf="value.elementtype.indexOf('Addition')!=-1">
                                            {{value.elementName}} ({{value.elementtype}})
                                        </span>

                                                    </th>
                                                    <th>Total Addition</th>

                                                    <th *ngFor="let value of allelemnets1">
                                                        <span *ngIf="value.elementtype.indexOf('Deduction')!=-1">
                                               {{value.elementName}} ({{value.elementtype}})
                                            </span>
                                                    </th>

                                                    <th>PF</th>
                                                    <th>PT</th>
                                                    <th>Total Deduction</th>
                                                    <th>Salary</th>
                                                </tr>


                                            </thead>

                                            <tbody>

                                                <tr *ngFor="let item of employees; let i = index">
                                                    <td>{{i+1}}</td>
                                                    <td>{{item.employeeCode}}</td>
                                                    <td>{{item.epfno}}</td>
                                                    <td>{{item.uan}}</td>
                                                    <td>{{item.panNo}}</td>
                                                    <td>{{item.eaccountNo}}</td>
                                                    <td>{{item.firstName}} {{item.middleName}} {{item.lastName}}</td>
                                                    <td>{{item.department}}</td>
                                                    <td>{{item.designation}}</td>
                                                    <td>{{item.days}}</td>
                                                    <td>{{item.prsent}}</td>

                                                    <td *ngFor="let value of allelemnets">
                                                        <span *ngFor="let allowvalue of item.allowances">
                                            <span *ngIf="value.elementName==allowvalue.elementName && value.elementtype.indexOf('Addition')!=-1">
                                            {{allowvalue.actualelementAmount}}
                                            <!-- {{allowvalue.elementAmount}} -->
                                            </span>
                                                        </span>
                                                    </td>

                                                    <td>{{item.addition}}</td>

                                                    <td *ngFor="let value of allelemnets1">
                                                        <span *ngFor="let allowvalue of item.allowances">
                                            <span *ngIf="value.elementName==allowvalue.elementName && value.elementtype.indexOf('Deduction')!=-1">
                                            {{allowvalue.actualelementAmount}}
                                            <!-- {{allowvalue.elementAmount}}     -->
                                        </span>
                                                        </span>
                                                    </td>

                                                    <td>{{item.pf}}</td>
                                                    <td>{{item.pt}}</td>
                                                    <td>{{item.deduction}}</td>
                                                    <td>{{item.netSalary}}</td>



                                                </tr>

                                            </tbody>

                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>